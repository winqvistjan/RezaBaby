@model IEnumerable<RezaBaby.FirstThingDetail>

@{
    ViewBag.Title = "Reza's first things";
    IEnumerable<CloudFile> allFiles = ViewBag.Media;
    string picture = ".jpg";
    bool addPicture = true;
}

<table class="table">    

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Body)
        </td>
        <td>
            @Html.HiddenFor(modelItem => item.FirstId)
        </td>
        <td>
            @if (User.Identity.IsAuthenticated)
            {
                @Html.ActionLink("Edit", "Edit", new { id = item.ID })
                @Html.ActionLink(" | Delete", "Delete", new { id = item.ID })
            }
        </td>
    </tr>
    if (addPicture)
    {
        <tr>
            <td>
                <figure class="floatLeft">
                    <img src="@Href("~/Content/Images/Reza_" + item.FirstId + @picture)" alt="No picture" />
                    <figcaption>@item.FirstThing.What</figcaption>
                </figure>
            </td>
        </tr>
        addPicture = false;
    }
}

</table>

@foreach (var mediaItem in allFiles)
{
    if (mediaItem.MimeType == "application/octet-stream")
    {
        <img src="@mediaItem.URL" alt="No picture" height="100" width="80">
        <br />
    }
}

<div>
    @Html.ActionLink("Back to List", "Index", "FirstThings")
</div>
